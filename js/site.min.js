(function(){document.addEventListener('DOMContentLoaded',()=>{try{const btn = document.querySelector(".nav-toggle");const nav = document.getElementById("primary-nav");const navLinks = document.querySelectorAll(".nav a");const footerLinks = document.querySelectorAll(".footer-nav a");const ALL_LINKS = Array.from(navLinks).concat(Array.from(footerLinks || []));function openNav(){if(!nav)return;nav.classList.add('open');if(btn)btn.setAttribute('aria-expanded','true');const first = nav.querySelector('a');if(first)first.focus();}function closeNav(returnFocus = true){if(!nav)return;nav.classList.remove('open');if(btn){btn.setAttribute('aria-expanded','false');if(returnFocus)btn.focus();}}if(btn && nav){btn.addEventListener('click',()=>{const isOpen = nav.classList.toggle('open');btn.setAttribute('aria-expanded',String(isOpen));if(isOpen){const first = nav.querySelector('a');if(first)first.focus();}});btn.addEventListener('keydown',(e)=>{if(e.key === 'Enter' || e.key === ' '){e.preventDefault();const isOpen = nav.classList.toggle('open');btn.setAttribute('aria-expanded',String(isOpen));if(isOpen){const first = nav.querySelector('a');if(first)first.focus();}}else if(e.key === 'Escape'){closeNav();}});document.addEventListener('keydown',(e)=>{if(e.key === 'Escape' && nav.classList.contains('open')){closeNav();}});document.addEventListener('click',(e)=>{if(!nav.classList.contains('open'))return;const target = e.target;if(!nav.contains(target)&& target !== btn && !btn.contains(target)){closeNav(false);}});}const path = location.pathname.split("/").pop()|| "index.html";ALL_LINKS.forEach(a =>{try{const href = a.getAttribute("href");if(!href)return;const hrefName = href.split("/").pop();if(hrefName === path ||(path === "" && hrefName === "index.html")){a.classList.add("active");a.setAttribute("aria-current","page");}else{a.classList.remove("active");a.removeAttribute("aria-current");}}catch(err){}});navLinks.forEach(link =>{link.addEventListener('click',()=>{const toggleVisible = btn && window.getComputedStyle(btn).display !== 'none';if(toggleVisible && nav && nav.classList.contains('open'))closeNav();});});const y = document.getElementById('year');if(y)y.textContent = new Date().getFullYear();let toTop = document.getElementById('toTop');if(!toTop){toTop = document.createElement('button');toTop.id = 'toTop';toTop.type = 'button';toTop.setAttribute('aria-label','Terug naar boven');toTop.hidden = true;toTop.className = 'to-top';toTop.textContent = '↑';toTop.style.position = 'fixed';toTop.style.right = '16px';toTop.style.bottom = '16px';toTop.style.padding = '10px 12px';toTop.style.borderRadius = '999px';toTop.style.boxShadow = '0 6px 16px rgba(0,0,0,0.12)';toTop.style.zIndex = '9999';document.body.appendChild(toTop);}let ticking = false;function onScroll(){if(!ticking){requestAnimationFrame(()=>{const show = window.scrollY >= 600;toTop.hidden = !show;ticking = false;});ticking = true;}}window.addEventListener('scroll',onScroll,{passive:true});toTop.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});toTop.hidden = true;});toTop.addEventListener('keydown',(e)=>{if(e.key === 'Enter' || e.key === ' '){e.preventDefault();window.scrollTo({top:0,behavior:'smooth'});}});document.addEventListener('mousedown',()=> document.documentElement.classList.add('using-mouse'));document.addEventListener('keydown',()=> document.documentElement.classList.remove('using-mouse'));document.querySelectorAll('form').forEach(form =>{const hasName = !!form.querySelector('[name="name"]');const hasEmail = !!form.querySelector('[name="email"]');const hasMessage = !!form.querySelector('[name="message"],textarea[name="message"]');if(hasName && hasEmail && hasMessage){if(!form.id)form.id = 'contact';if(!form.querySelector('[name="company"]')){const hp = document.createElement('input');hp.type = 'text';hp.name = 'company';hp.tabIndex = -1;hp.autocomplete = 'off';hp.style.position = 'absolute';hp.style.left = '-9999px';form.prepend(hp);}if(!form.querySelector('#form-msg')){const p = document.createElement('p');p.id = 'form-msg';p.setAttribute('role','status');p.setAttribute('aria-live','polite');form.appendChild(p);}form.addEventListener('submit',async(e)=>{const action =(form.getAttribute('action')|| '').trim();const isNetlify = form.hasAttribute('data-netlify');const isFormspree = /formspree\.io\/ const isPhpHandler = /\.php(\?|$)/i.test(action);const submitBtn = form.querySelector('button[type="submit"]');const originalBtnText = submitBtn ? submitBtn.textContent:'';if(isNetlify || isFormspree || isPhpHandler){if(submitBtn){submitBtn.disabled = true;submitBtn.innerHTML = '<span class="spinner"></span> Verzenden…';}return;}e.preventDefault();const honeypot = form.querySelector('[name="company"]');if(honeypot && honeypot.value)return;if(submitBtn){submitBtn.disabled = true;submitBtn.innerHTML = '<span class="spinner"></span> Verzenden…';}const msg = form.querySelector('#form-msg');msg &&(msg.textContent = '');const data = new FormData(form);try{const actionUrl = form.action && form.action !== '#' ? form.action:'/api/contact';const controller = new AbortController();const timeoutId = setTimeout(()=> controller.abort(),8000);const res = await fetch(actionUrl,{method:'POST',body:data,signal:controller.signal});clearTimeout(timeoutId);if(res.ok){msg &&(msg.textContent = 'Bedankt,ik reageer snel.');form.reset();if(submitBtn){submitBtn.disabled = false;submitBtn.textContent = originalBtnText;}}else{msg &&(msg.textContent = 'Er ging iets mis. Probeer later nog eens.');if(submitBtn){submitBtn.disabled = false;submitBtn.textContent = originalBtnText;}}}catch(err){if(err.name === 'AbortError'){msg &&(msg.textContent = 'Timeout - probeer het later opnieuw.');}else{msg &&(msg.textContent = 'Er ging iets mis. Controleer je verbinding.');}if(submitBtn){submitBtn.disabled = false;submitBtn.textContent = originalBtnText;}}});const requiredFields = form.querySelectorAll('[required]');requiredFields.forEach(f =>{const err = form.querySelector(`.field-error[data-error-for="${f.id}"]`);f.addEventListener('invalid',()=>{f.setAttribute('aria-invalid','true');if(err)err.textContent = f.validationMessage || 'Vul dit veld in.';},true);f.addEventListener('input',()=>{if(f.checkValidity()){f.removeAttribute('aria-invalid');if(err)err.textContent = '';}});});}});try{window.__site_helpers ={openNav:openNav,closeNav:closeNav};}catch(e){}}catch(err){console.warn('Nav elements not found:',err);}(function(){const CONSENT_COOKIE = 'nlvl_consent';const GA_MEAS_ID = 'G-2XKMZ9VR1Z';const ONE_YEAR = 365 * 24 * 60 * 60;function setCookie(name,value,maxAgeSeconds){document.cookie = name + '=' + encodeURIComponent(value)+ ';Max-Age=' + maxAgeSeconds + ';Path=/;SameSite=Lax';}function getCookie(name){const m = document.cookie.match(new RegExp('(?:^|;)' + name.replace(/[.$?*|{}()\[\]\\\/\+^]/g,'\\$&')+ '=([^;]*)'));return m ? decodeURIComponent(m[1]):null;}function applyConsent(value){const granted = value === 'granted';if(typeof gtag === 'function'){gtag('consent','update',{ad_storage:granted ? 'granted':'denied',analytics_storage:granted ? 'granted':'denied'});if(granted){gtag('config',GA_MEAS_ID);}}}function createBanner(){const banner = document.createElement('div');banner.id = 'cookie-banner';banner.setAttribute('role','dialog');banner.setAttribute('aria-live','polite');banner.setAttribute('aria-label','Cookiekeuze');banner.style.cssText = [ 'position:fixed','inset:auto 1rem 1rem 1rem','z-index:99999','background:#ffffff','color:#0b1f1e','border:1px solid rgba(0,0,0,0.1)','box-shadow:0 12px 32px rgba(0,0,0,0.18)','border-radius:12px','padding:1rem','max-width:720px','margin:0 auto','font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial' ].join(';');banner.innerHTML =('<div style="display:flex;gap:1rem;flex-direction:column;">\ <div style="flex:1;min-width:0;">\ <strong style="display:block;margin-bottom:.5rem;color:#22524f;font-size:15px;">Cookies en privacy</strong>\ <p style="margin:0;color:#355c59;font-size:14px;line-height:1.5;">We gebruiken alleen analytische cookies om onze site te verbeteren. \n'+ 'We plaatsen deze pas na jouw akkoord. Je keuze kun je later altijd wijzigen via de privacy-pagina.</p>\ </div>\ <div style="display:flex;gap:.5rem;flex-wrap:wrap;justify-content:stretch;">\ <button id="cb-decline" type="button" class="btn" style="flex:1;min-width:120px;padding:.65rem 1rem;border-radius:10px;border:1px solid #cfd8d7;background:#fff;color:#22524f;font-size:14px;cursor:pointer;">Weigeren</button>\ <button id="cb-accept" type="button" class="btn-primary" style="flex:1;min-width:120px;padding:.65rem 1rem;border-radius:10px;border:0;background:#507a76;color:#fff;font-size:14px;cursor:pointer;">Alles accepteren</button>\ </div>\ </div>');document.body.appendChild(banner);const btnAccept = banner.querySelector('#cb-accept');const btnDecline = banner.querySelector('#cb-decline');function hide(){banner.remove();}btnAccept.addEventListener('click',function(){setCookie(CONSENT_COOKIE,'granted',ONE_YEAR);applyConsent('granted');hide();});btnDecline.addEventListener('click',function(){setCookie(CONSENT_COOKIE,'denied',ONE_YEAR);applyConsent('denied');hide();});(btnAccept || banner).focus();}const choice = getCookie(CONSENT_COOKIE);if(choice === 'granted' || choice === 'denied'){applyConsent(choice);}else{createBanner();}})();});})();